/*! Baoshuo's OI Blog | Build: 810448f | Baoshuo ( https://baoshuo.ren ) */
"use strict";!function(a,o,r,i){function u(e){return a.getElementById(e)}function n(t,e){return!(32<=t)&&(setTimeout(function(){return window.plausible&&window.plausible("Post: Decrypt",{props:{value:location.pathname+"@"+t+"@"+(e?"auto":"manual"),path:location.pathname,password:t,auto:e}})},0),n=t,o.importKey("raw",(new TextEncoder).encode(n),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]).then(function(e){return Promise.all([(n=e,o.deriveKey({name:"PBKDF2",hash:"SHA-256",salt:(new TextEncoder).encode(s).buffer,iterations:1024},n,{name:"HMAC",hash:"SHA-256",length:256},!0,["verify"])),(n=e,o.deriveKey({name:"PBKDF2",hash:"SHA-256",salt:(new TextEncoder).encode(s).buffer,iterations:1024},n,{name:"AES-CBC",length:256},!0,["decrypt"])),(e=e,o.deriveBits({name:"PBKDF2",hash:"SHA-256",salt:(new TextEncoder).encode(c).buffer,iterations:512},e,128))]).then(function(e){var t,n=e[0],r=e[1],e=e[2];return t=n,o.decrypt({name:"AES-CBC",iv:e},r,l(d.encryptedData).buffer).then(function(n){return p(t,n).then(function(e){return!!e&&(new TextDecoder).decode(n)})}).catch(function(e){return!1}).then(function(e){if(e){var n=u("content"),t=u("encrypt-panel"),e=a.createRange().createContextualFragment(e);return n.innerHTML=null,n.appendChild(e),n.style.display=null,t.style.display="none",window.codeGroup&&window.codeGroup(),!0}return!1})}).then(function(e){e?r.setItem("password@"+i,t):u("encrypt-message").innerHTML="密码错误。<br><small>提示："+d.hint+"</small>"});var n}));var n}var s="oi.baoshuo.ren_key_salt",c="oi.baoshuo.ren_iv_salt",d=JSON.parse(a.getElementById("encrypt-data").innerText),l=function(e){return new Uint8Array(e.match(/[\da-f]{2}/gi).map(function(e){return parseInt(e,16)}))},p=function(e,n){return o.verify({name:"HMAC",hash:"SHA-256"},e,l(d.hmacDigest).buffer,n)},e=new URL(location.href).searchParams.get("password")||r.getItem("password@"+i);e&&n(e,!0).then(function(e){e||(u("password-submit").addEventListener("click",function(){return n(u("password-input").value)}),u("password-input").addEventListener("keydown",function(e){"Enter"===e.key&&n(u("password-input").value)}))})}(document,window.crypto.subtle||window.crypto.webkitSubtle,localStorage,location.pathname);