/*! Baoshuo's OI Blog | Build: 69b218b | Baoshuo ( https://baoshuo.ren ) */
/* scripts/search.js */
!function(c,e){var f,h,d=new URL(e.href).searchParams.get("q"),a=function(a){return c.getElementById(a)},g=a("result"),i=function(a){return'<p>\u4F60\u4E5F\u53EF\u4EE5\u524D\u5F80 <a href="https://www.google.com/search?q='+encodeURIComponent("site:"+e.hostname+" "+a)+'" target="_blank" rel="nofollow noopener noreferrer">Google</a> \u6216 <a href="https://www.bing.com/search?q='+encodeURIComponent("site:"+e.hostname+" "+a)+'" target="_blank" rel="nofollow noopener noreferrer">Bing</a> \u641C\u7D22\u300C<a href="https://www.google.com/search?q='+encodeURIComponent("site:"+e.hostname+" "+a)+'" target="_blank" rel="nofollow noopener noreferrer">'+a+"</a>\u300D\u3002</p>"},j=function(b,c){a("search-tips").innerHTML='<p>\u51FA\u9519\u4E86\uFF0C\u8BF7 <a href="javascript:location.reload()">\u91CD\u8BD5</a>\u3002</p>'+i(b),a("search-tips").style.display=null,a("search-loading").style.display="none",console.error(c)},k=function(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","\u2026":"&hellip;"};return a.replace(/[&<>"]/g,function(a){return b[a]||a})},l=function(a){return a.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")},m=function(d,m){d.length<=32&&setTimeout(function(){return window.plausible&&window.plausible("Search",{props:{query:d}})},0);var n=a("result-template").content,b=[],e=d.trim().split(/[\s\-]+/).map(k),o=e.map(function(a){return a.toLowerCase()}),p=new RegExp(e.map(l).join("|"),"gi");m.forEach(function(a){if(a.title&&a.content){var j=a.title,h=a.content,k=a.tags,l=a.categories,w=j.toLowerCase(),x=h.toLowerCase(),y=k&&k.map(function(a){return a.toLowerCase()})||[],z=l&&l.map(function(a){return a.toLowerCase()})||[],m=-1,q=-1,r=0,u=0,v=0;if(o.forEach(function(a){var f=w.indexOf(a),b=x.indexOf(a),d=y.indexOf(a),e=z.indexOf(a);if((f>=0||b>=0||d>=0||e>=0)&&r++,d>=0&&u++,e>=0&&v++,r>0){var c=x.lastIndexOf(a);b>=0&&(m=m<0?b:Math.min(m,b)),c>=0&&(q=q<0?c:Math.max(q,c))}}),r===e.length||!(r<2)){var s,d,f,g=0,i=0;m>=0&&(g=Math.max(m-10,0)),q>=0&&(f=Math.min(q+10,h.length)),f-g<50&&(f=g+300),d=h.substring(g,f);var t=function(a,b){var c=0;return a=a.replace(p,function(a){return i+=c>0?b*(1+c/10):1*b,c++,"<mark>"+a+"</mark>"})};s=t(j,4),d=t(d,1),i+=2*u,i+=3*v,n.querySelector("a").href=a.url,n.querySelector("[data-title]").innerHTML=s,n.querySelector("[data-content]").innerHTML=d,b.push({content:c.importNode(n,!0),weight:i})}}}),b=b.sort(function(a,b){return b.weight-a.weight});var j="<small>\uFF08\u8017\u65F6 "+Number((h=new Date().getTime())-f)+" \u6BEB\u79D2\uFF09</small>";a("search-loading").remove(),b.length?(g.innerHTML='<div class="result-info">\u627E\u5230 '+b.length+" \u6761\u7ED3\u679C"+j+"</div>",b.forEach(function(a){return g.appendChild(a.content)})):g.innerHTML="<p>\u672A\u627E\u5230\u4EFB\u4F55\u7ED3\u679C\uFF0C\u8BF7\u5C1D\u8BD5\u641C\u7D22\u5176\u4ED6\u5173\u952E\u5B57\u3002"+j+"</p>"+i(d)};if(!("content"in c.createElement("template"))){g.innerHTML='<p>\u60A8\u5F53\u524D\u4F7F\u7528\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301 HTML5 \u6807\u51C6\u4E2D\u7684 <code>&lt;template&gt;</code> \u6807\u7B7E\u3002</p><p>\u63A8\u8350\u4F7F\u7528\u6700\u65B0\u7248\u7684 <a href="https://google.cn/chrome/" target="_blank" rel="external noopener nofollow">Google Chrome \u6D4F\u89C8\u5668</a> \u8BBF\u95EE\u672C\u7AD9\u3002</p>';return}if(d)f=new Date().getTime(),a("input").value=d,a("search-tips").style.display="none",a("search-loading").style.display=null,fetch("/search.json").then(function(a){return a.json()}).then(function(a){return m(d,a)}).catch(function(a){return j(d,a)});else{var b=c.createElement("link");b.rel="prefetch",b.as="fetch",b.href="/search.json",c.head.appendChild(b)}}(document,location)