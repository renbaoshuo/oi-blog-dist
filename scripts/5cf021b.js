/*! Baoshuo's OI Blog | Build: 69b218b | Baoshuo ( https://baoshuo.ren ) */
/* scripts/instant.page.js */
var k=new Set,c=document.createElement("link"),i=c.relList&&c.relList.supports&&c.relList.supports("prefetch")&&window.IntersectionObserver&&"isIntersecting"in IntersectionObserverEntry.prototype,l="instantAllowQueryString"in document.body.dataset,m="instantAllowExternalLinks"in document.body.dataset,n="instantWhitelist"in document.body.dataset,e="instantMousedownShortcut"in document.body.dataset,j=65,f=!1,g=!1,d=!1;if("instantIntensity"in document.body.dataset){var a=document.body.dataset.instantIntensity;if("mousedown"==a.substr(0,9))f=!0,"mousedown-only"==a&&(g=!0);else if("viewport"==a.substr(0,8))!(navigator.connection&&(navigator.connection.saveData||navigator.connection.effectiveType&&navigator.connection.effectiveType.includes("2g")))&&("viewport"==a?document.documentElement.clientWidth*document.documentElement.clientHeight<45e4&&(d=!0):"viewport-all"==a&&(d=!0));else{var h=parseInt(a);isNaN(h)||(j=h)}}if(i){var o,p,b={capture:!0,passive:!0};g||document.addEventListener("touchstart",function(b){p=performance.now();var a=b.target.closest("a");r(a)&&s(a.href)},b),f?e||document.addEventListener("mousedown",function(b){var a=b.target.closest("a");r(a)&&s(a.href)},b):document.addEventListener("mouseover",function(b){if(!(performance.now()-p<1111)){var a=b.target.closest("a");r(a)&&(a.addEventListener("mouseout",q,{passive:!0}),o=setTimeout(function(){s(a.href),o=void 0},j))}},b),e&&document.addEventListener("mousedown",function(a){if(!(performance.now()-p<1111)){var b=a.target.closest("a");if(!(a.which>1)&&!a.metaKey&&!a.ctrlKey&&b){b.addEventListener("click",function(a){1337!=a.detail&&a.preventDefault()},{capture:!0,passive:!1,once:!0});var c=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1,detail:1337});b.dispatchEvent(c)}}},b),d&&(window.requestIdleCallback?function(a){requestIdleCallback(a,{timeout:1500})}:function(a){a()})(function(){var a=new IntersectionObserver(function(b){b.forEach(function(b){if(b.isIntersecting){var c=b.target;a.unobserve(c),s(c.href)}})});document.querySelectorAll("a").forEach(function(b){r(b)&&a.observe(b)})})}function q(a){(!a.relatedTarget||a.target.closest("a")!=a.relatedTarget.closest("a"))&&o&&(clearTimeout(o),o=void 0)}function r(a){if(a&&a.href){if(!n||"instant"in a.dataset){if(m||a.origin==location.origin||"instant"in a.dataset){if(["http:","https:"].includes(a.protocol)){if("http:"!=a.protocol||"https:"!=location.protocol){if(l||!a.search||"instant"in a.dataset){if((!a.hash||a.pathname+a.search!=location.pathname+location.search)&&!("noInstant"in a.dataset))return!0}}}}}}}function s(a){if(!k.has(a)){var b=document.createElement("link");b.rel="prefetch",b.href=a,document.head.appendChild(b),k.add(a)}}